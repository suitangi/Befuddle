const canVibrate=window.navigator.vibrate;function getParameterByName(e,a){a||(a=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function recreateNode(e,a){if(a)e.parentNode.replaceChild(e.cloneNode(!0),e);else{for(var t=e.cloneNode(!1);e.hasChildNodes();)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e)}}function requestCard(e){document.getElementById("cardImage").style="opacity:0; transition: opacity 0s;",document.getElementById("imageLoading").style="",fetch("https://api.scryfall.com/cards/"+e).then((e=>e.json())).then((e=>loadCard(e))).catch((e=>{$.dialog({title:'<span class="modalTitle">Error</span>',content:'<span class="modalText">Couldn\'t load card image and information. Check your connection and/or Scryfall API status.</span>',type:"red",theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,useBootstrap:!1,typeAnimated:!0,backgroundDismiss:!0})}))}function isAlpha(e){return c=e.toLowerCase().charCodeAt(0),c>=97&&c<=122}function loadCard(e){if(e){if(window.mtgCard={},window.mtgCard.id=e.id,window.mtgCard.layout=e.layout,window.mtgCard.mana_cost=e.mana_cost,window.mtgCard.name=e.name,window.mtgCard.colors=e.colors,"transform"==window.mtgCard.layout||"modal_dfc"==window.mtgCard.layout){window.mtgCard.card_faces=[];for(var a=0;a<e.card_faces.length;a++)window.mtgCard.card_faces.push({mana_cost:e.card_faces[a].mana_cost,colors:e.card_faces[a].colors,name:e.card_faces[a].name,image_uris:{normal:e.card_faces[a].image_uris.normal,art_crop:e.card_faces[a].image_uris.art_crop}})}else window.mtgCard.image_uris={normal:e.image_uris.normal,art_crop:e.image_uris.art_crop};if(window.gameSesh={},window.gameSesh.end=!1,window.gameSesh.wrongGuess="",window.gameSesh.guesses="",window.gameSesh.tlv=window.game[window.game.mode].lives,"daily"==window.game.mode){let e=new Date;window.gameSesh.doy=1e3*e.getYear()+e.getDOY(),window.gameSesh.giveUp=!1}"free"==window.game.mode&&(window.gameSesh.manastate=window.game.free.manaState),window.gameSesh.hideBlanks=window.game[window.game.mode].hideBlanks,window.gameSesh.card=window.mtgCard}window.lives=window.game[window.game.mode].lives;let t=document.getElementById("keyboard").children;for(a=0;a<t.length;a++)t[a].classList.remove("correct"),t[a].classList.remove("incorrect"),t[a].classList.remove("redText"),t[a].innerText=t[a].getAttribute("data-key");if(document.getElementById("seeCard").style="display:none;",window.mtgCard.cf=-1,"transform"==window.mtgCard.layout||"modal_dfc"==window.mtgCard.layout){getParameterByName("cf")?window.mtgCard.cf=parseInt(getParameterByName("cf")):"daily"==window.game.mode?window.mtgCard.cf=0:window.mtgCard.cf=Math.floor(Math.random()*window.mtgCard.card_faces.length);let e=window.mtgCard.card_faces[window.mtgCard.cf];window.mtgCard.mana_cost=e.mana_cost,window.mtgCard.colors=e.colors,window.mtgCard.image_uris=e.image_uris,window.mtgCard.name=e.name}let n="";if("free"==window.game.mode&&2==window.gameSesh.manastate||"daily"==window.game.mode){if(""==window.mtgCard.mana_cost)n="No mana cost";else{if(window.mtgCard.manaCost=[],"split"==window.mtgCard.layout||"adventure"==window.mtgCard.layout||"flip"==window.mtgCard.layout){let e=window.mtgCard.mana_cost.split(" // ");for(a=0;a<e.length;a++)a>0&&window.mtgCard.manaCost.push("//"),window.mtgCard.manaCost=window.mtgCard.manaCost.concat(e[a].substring(1,e[a].length-1).split("}{"))}else window.mtgCard.manaCost=window.mtgCard.manaCost.concat(window.mtgCard.mana_cost.substring(1,window.mtgCard.mana_cost.length-1).split("}{"));for(a=0;a<window.mtgCard.manaCost.length;a++)""!=window.mtgCard.manaCost[a]&&("//"==window.mtgCard.manaCost[a]?n+=" // ":n+='<img class="manaSymbol" alt="'+window.mtgCard.manaCost[a]+'" src="'+window.mtgSymbols[window.mtgCard.manaCost[a]]+'">')}n+="<br><br>"}else if("free"==window.game.mode&&1==window.gameSesh.manastate){if(n="Color"+(window.mtgCard.colors.length<2?"":"s")+": ",0==window.mtgCard.colors.length)n+='<img class="manaSymbol" src="'+window.mtgSymbols.C+'">';else for(a=0;a<window.mtgCard.colors.length;a++)n+='<img class="manaSymbol" alt="'+window.mtgCard.colors[a]+'" src="'+window.mtgSymbols[window.mtgCard.colors[a]]+'">';n+="<br><br>"}else n="";document.getElementById("cardMana").innerHTML=n;var i=document.getElementById("cardImage"),o=new Image;o.onload=function(){i.src=this.src,document.getElementById("cardImage").style="opacity:1;",document.getElementById("imageLoading").style="display:none;"},o.src=window.mtgCard.image_uris.art_crop;let d=window.mtgCard.name;window.gameSesh.hideBlanks?window.gameSesh.hiddenName=hideName(d,""):window.gameSesh.hiddenName=hideName(d,"_"),document.getElementById("cardName").innerText=window.gameSesh.hiddenName,document.getElementById("card").style="","daily"==window.game.mode&&Cookies.set("daily",JSON.stringify(window.gameSesh),{expires:365})}function loadGuesses(){window.loadingGuesses=!0;let e=window.gameSesh.guesses;window.gameSesh.wrongGuess="",window.gameSesh.guesses="";for(var a=0;a<e.length;a++)submitLetter(e.charAt(a));window.loadingGuesses=!1}function submitLetter(a){if(window.gameSesh.guesses.includes(a))return;window.gameSesh.guesses+=a;let t=!1,n=a.toUpperCase(),i=window.mtgCard.name,o="";for(var d=0;d<i.length;d++)i.charAt(d)==a||i.charAt(d)==n?(t=!0,o+=i.charAt(d)):window.gameSesh.hideBlanks?!window.gameSesh.guesses.includes(i.toLowerCase().charAt(d))&&isAlpha(i.charAt(d))||(o+=i.charAt(d)):o+=window.gameSesh.hiddenName.charAt(d);if(t)window.displayKeyboard[a].classList.add("correct"),window.gameSesh.hiddenName=o,document.getElementById("cardName").innerText=window.gameSesh.hiddenName,window.game.vibra&&canVibrate&&navigator.vibrate(15),window.loadingGuesses||(window.gameSesh.hideBlanks?window.stats[window.game.mode].acc[2]++:window.stats[window.game.mode].acc[0]++,Cookies.set(window.game.mode+"Stats",JSON.stringify(window.stats[window.game.mode]),{expires:365})),window.gameSesh.hiddenName==window.mtgCard.name&&(window.gameSesh.end=!0,document.getElementById("seeCard").style="","free"==window.game.mode?gameWinFree():"daily"==window.game.mode&&gameWinDaily());else if(window.gameSesh.wrongGuess+=a,window.displayKeyboard[a].classList.add("incorrect"),window.game.vibra&&canVibrate&&navigator.vibrate(55),window.loadingGuesses||(window.gameSesh.hideBlanks?window.stats[window.game.mode].acc[3]++:window.stats[window.game.mode].acc[1]++,Cookies.set(window.game.mode+"Stats",JSON.stringify(window.stats[window.game.mode]),{expires:365})),-1!=window.lives){for(e of(window.lives--,window.displayKeyboard[a].classList.add("redText"),document.getElementsByClassName("incorrect")))e.innerText=window.lives;0==window.lives&&(window.gameSesh.end=!0,document.getElementById("seeCard").style="","free"==window.game.mode?gameLostFree():"daily"==window.game.mode&&gameLostDaily())}Cookies.set(window.game.mode,JSON.stringify(window.gameSesh),{expires:365})}function seeCardHandler(){window.gameSesh.hiddenName==window.mtgCard.name?"free"==window.game.mode?gameWinFree():"daily"==window.game.mode&&gameWinDaily():"free"==window.game.mode?gameLostFree():"daily"==window.game.mode&&gameLostDaily()}function gameLostFree(){-1!=window.gameSesh.tlv&&(window.gameSesh.hideBlanks?window.stats.free.wr[1][window.gameSesh.tlv-1][1]++:window.stats.free.wr[0][window.gameSesh.tlv-1][1]++,Cookies.set("freeStats",JSON.stringify(window.stats.free),{expires:365})),$.confirm({title:'<span class="modalTitle">Totally Lost</span>',content:getCardHtml(),theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,useBootstrap:!1,typeAnimated:!0,closeIcon:!0,buttons:{link:{text:"Share",btnClass:"btn-green",action:function(e){return clipboardHandler(e,"Befuddle:\n"+(-1==window.gameSesh.tlv?"Gave Up":"X/"+window.gameSesh.tlv)+(window.gameSesh.hideBlanks?"*":"")+"\n"+window.location.href+"/?cardId="+window.mtgCard.id+(-1!=window.mtgCard.cf?"&cf="+window.mtgCard.cf:"")),!1}},close:{text:"Next Card",btnClass:"btn-blue",keys:["enter"],action:function(){requestCard(window.cardList[Math.floor(Math.random()*window.cardList.length)])}}}})}function gameLostDaily(){if(null!==window.dailyModal)return void window.dailyModal.open();let e=(new Date).getDOY();window.stats.daily.doy!=e&&(window.stats.daily.doy=e,window.stats.daily.streak=0,window.gameSesh.hideBlanks?window.stats.daily.WL[3]++:window.stats.daily.WL[1]++,Cookies.set("dailyStats",JSON.stringify(window.stats.daily),{expires:365})),window.dailyModal=$.confirm({title:'<span class="modalTitle">Totally Lost</span>',content:getCardHtml()+'<div id="dailyTimerDisplay"></div>',theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,useBootstrap:!1,typeAnimated:!0,closeIcon:!0,buttons:{free:{text:"Free Play",btnClass:"btn-purple",action:function(e){window.gameSesh.end=!0,window.game.mode="free",Cookies.get("free")&&(window.gameSesh=JSON.parse(Cookies.get("free")),window.mtgCard=window.gameSesh.card),window.gameSesh.end?loadGame():continueGameModal()}},stats:{text:"Stats",btnClass:"btn-blue",action:function(){statsModal()}},link:{text:"Share",btnClass:"btn-green",action:function(e){return clipboardHandler(e,"Daily Befuddle "+(new Date).toLocaleDateString("en-US")+"\nX"+(window.gameSesh.hideBlanks?"*":"")+"\n"+window.location.href),!1}}}})}function gameWinDaily(){if(null!==window.dailyModal)return void window.dailyModal.open();let e=window.gameSesh.wrongGuess.length,a=(new Date).getDOY();window.stats.daily.doy!=a&&(window.stats.daily.doy=a,window.stats.daily.streak++,window.stats.daily.streak>window.stats.daily.maxStk&&(window.stats.daily.maxStk=window.stats.daily.streak),window.gameSesh.hideBlanks?(window.stats.daily.score[1][e]++,window.stats.daily.WL[2]++):(window.stats.daily.score[0][e]++,window.stats.daily.WL[0]++),Cookies.set("dailyStats",JSON.stringify(window.stats.daily),{expires:365}),window.game.vibra&&canVibrate&&navigator.vibrate([400]),confetti({particleCount:100,spread:70,origin:{y:.6},zIndex:900719925,colors:"dark"==window.game.theme?["#eee"]:["#333"]})),window.dailyModal=$.confirm({title:'<span class="modalText">'+getWinTerms(e)+(0!=e?" — "+e+" wrong":"")+"</span>",content:getCardHtml()+'<div id="dailyTimerDisplay"></div>',theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,useBootstrap:!1,typeAnimated:!0,closeIcon:!0,buttons:{free:{text:"Free Play",btnClass:"btn-purple",action:function(e){window.gameSesh.end=!0,window.game.mode="free",Cookies.get("free")&&(window.gameSesh=JSON.parse(Cookies.get("free")),window.mtgCard=window.gameSesh.card),window.gameSesh.end?loadGame():continueGameModal()}},stats:{text:"Stats",btnClass:"btn-blue",action:function(){statsModal()}},link:{text:"Share",btnClass:"btn-green",action:function(a){return clipboardHandler(a,"Daily Befuddle "+(new Date).toLocaleDateString("en-US")+"\n"+e+"/"+window.game.daily.lives+(window.gameSesh.hideBlanks?"*":"")+"\n"+window.location.href),!1}}}})}function gameWinFree(){let e=window.gameSesh.wrongGuess.length;window.gameSesh.hideBlanks?(0==e&&window.stats.free.perf[1]++,-1!=window.gameSesh.tlv&&window.stats.free.wr[1][window.gameSesh.tlv-1][0]++,window.stats.free.score[1][e]++):(0==e&&window.stats.free.perf[0]++,-1!=window.gameSesh.tlv&&window.stats.free.wr[0][window.gameSesh.tlv-1][0]++,window.stats.free.score[0][e]++),0==e&&(window.game.vibra&&canVibrate&&navigator.vibrate([400]),confetti({particleCount:100,spread:70,origin:{y:.6},zIndex:900719925,colors:"dark"==window.game.theme?["#eee"]:["#333"]})),Cookies.set("freeStats",JSON.stringify(window.stats.free),{expires:365}),$.confirm({title:'<span class="modalText">'+getWinTerms(e)+(0!=e?" — "+e+" wrong":"")+"</span>",content:getCardHtml(),theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,useBootstrap:!1,typeAnimated:!0,closeIcon:!0,buttons:{link:{text:"Share",btnClass:"btn-green",action:function(a){return clipboardHandler(a,"Befuddle: \n"+e+(-1==window.gameSesh.tlv?" wrong guess"+(1==e?"":"es"):"/"+window.gameSesh.tlv)+(window.gameSesh.hideBlanks?"*":"")+"\n"+window.location.href+"/?cardId="+window.mtgCard.id+(-1!=window.mtgCard.cf?"&cf="+window.mtgCard.cf:"")),!1}},close:{text:"Next Card",btnClass:"btn-blue",keys:["enter"],action:function(){window.cardList?requestCard(window.cardList[Math.floor(Math.random()*window.cardList.length)]):loadGame()}}}})}function clipboardHandler(e,a){navigator.clipboard.writeText(a).then((function(){e.addClass("displayButton"),e.setText("Copied"),e.addClass("btn-dark"),e.removeClass("btn-green"),setTimeout((function(a){e.removeClass("btn-dark"),e.addClass("btn-green")}),100,e),setTimeout((function(a){e.setText("Share")}),3e3,e)}),(function(){clipboardError(a)}))}function clipboardError(e){$.dialog({title:'<span class="modalTitle">Error: Clipboard Access Denied</span>',content:'<span class="modalText">You can manually copy the text below:<br><br><div class="copyText">'+e+"</div></span>",type:"red",theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,useBootstrap:!1,typeAnimated:!0,backgroundDismiss:!0})}function getCardHtml(){let e;return e="transform"==window.mtgCard.layout||"modal_dfc"==window.mtgCard.layout?'<div class="flip-card"><div class="flip-card-inner"><div class="flip-card-front"><img src="'+window.mtgCard.card_faces[window.mtgCard.cf].image_uris.normal+'" style="border-radius:5%;"><span class="material-symbols-outlined flip-symbol-front"> chevron_right </span></div> <div class="flip-card-back"><img src="'+window.mtgCard.card_faces[1-window.mtgCard.cf].image_uris.normal+'" style="border-radius:5%;"><span class="material-symbols-outlined flip-symbol-back"> chevron_left </span></div></div></div>':'<img src="'+window.mtgCard.image_uris.normal+'" style="border-radius:5%;">',e}function getWinTerms(e){return 1==window.lives?"Final Fortune":["Compleat Perfection!","Ancestrally Recalled","Thought Twice","Pondered Well","Delved into Secrets","Pieces Pored Over","Faithlessly Looted","Tome Scoured","Dashed Hopes","Thoughts Siezed","Mind Ground","Wildly Guessed","Yawgmoth's Wouldn't","Triskaidekaphobia!","Gone Blank","Gone Blank","Gone Blank","Gone Blank","Gone Blank","Gone Blank","Gone Blank","Gone Blank","Gone Blank","Gone Blank","Gone Blank","Gone Blank","Gone Blank"][e]}function hideName(e,a){let t="";for(var n=0;n<e.length;n++)isAlpha(e.charAt(n))?t+=a:t+=e.charAt(n);return t}function helpModal(){"daily"==window.game.mode?$.dialog({title:'<span class="modalTitle">How to Play</span>',content:'<span class="helpText">Guess the <a href="https://magic.wizards.com/en" target="_blank">Magic: The Gathering</a> Card from the art and mana cost, Hangman style. You have 7 lives, meaning after guessing 7 wrong letters, the game is over.<br><br>After each guess, the keys will show you if the letter was incorrect, as well as the number of lives you have left.<br><br></span><div class="hr"></div><span class="helpText">A new Befuddle will be available each day!',theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,backgroundDismiss:!0,useBootstrap:!1}):"free"==window.game.mode&&$.dialog({title:'<span class="modalTitle">How to Play</span>',content:'<span class="helpText">Guess the <a href="https://magic.wizards.com/en" target="_blank">Magic: The Gathering</a> Card, Hangman style. Each card is randomly picked from a list of 30,000+ cards. You can adjust the number of lives and the mana cost display in the options menu.<br><br>After each guess, the keyboard keys will show you if the letter was incorrect, as well as the number of lives you have left.<br><br></span><div class="hr"></div><span class="helpText">This is Free Play mode, play to your heart\'s content!',theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,backgroundDismiss:!0,useBootstrap:!1})}function settingsModal(){let e="";if("daily"==window.game.mode)e+='<div class="gameSettings"><div class="gameSettings"><br><br><span class="menuText" id="themedisplay">Dark Mode</span><label class="switch"><input id="darkInput" type="checkbox" '+("dark"===window.game.theme?"checked":"")+"><div><span></span></div></label>"+(canVibrate?'<div class="gameSettings"><br><br><span class="menuText">Vibration</span><label class="switch"><input id="vibraInput" type="checkbox" '+(window.game.vibra?"checked":"")+"><div><span></span></div></label>":"")+'<br><div class="hr"></div><br><span class="menuText" id="hmdisplay">Hidden mode</span><label class="switch"><input id="hmInput" type="checkbox" '+(window.game.daily.hideBlanks?"checked":"")+'><div><span></span></div></label><span class="smallText">Hidden mode hides the letter blanks.</span><br><br><div class="hr"></div><span class="smallText">Changes won\'t apply until the next game you play.</span><br></div>',window.setModal=$.dialog({title:'<span class="modalTitle">Options</span>',content:e,theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,backgroundDismiss:!0,useBootstrap:!1,onContentReady:function(){if(this.$content.find("#hmInput").on("input",(function(){window.game.daily.hideBlanks=this.checked,Cookies.set("befuddle",JSON.stringify(window.game),{expires:365})})),this.$content.find("#darkInput").on("input",(function(){window.game.theme=this.checked?"dark":"light",setTheme(),Cookies.set("befuddle",JSON.stringify(window.game),{expires:365})})),canVibrate){this.$content.find("#vibraInput").on("input",(function(){window.game.vibra=this.checked,Cookies.set("befuddle",JSON.stringify(window.game),{expires:365})}))}}});else if("free"==window.game.mode){let a=["Show Nothing","Show Colors","Show Mana Cost"];e+='<div class="gameSettings"><div class="gameSettings"><br><br><span class="menuText" id="themedisplay">Dark Mode</span><label class="switch"><input id="darkInput" type="checkbox" '+("dark"===window.game.theme?"checked":"")+"><div><span></span></div></label>"+(canVibrate?'<div class="gameSettings"><br><br><span class="menuText">Vibration</span><label class="switch"><input id="vibraInput" type="checkbox" '+(window.game.vibra?"checked":"")+"><div><span></span></div></label>":"")+'<br><div class="hr"></div><br><span class="menuText">Lives: <span id="livesdisplay">'+(-1==window.game.free.lives?"Off":window.game.free.lives)+'</span></span><div class="slidecontainer"><input id="livesInput" type="range" min="0" max="25" value="'+window.game.free.lives+'" class="slider"></div><br><span class="menuText" id="manadisplay">'+a[window.game.free.manaState]+'</span><div class="slidecontainer"><input id="manaInput" type="range" min="0" max="2" value="'+window.game.free.manaState+'" class="slider"></div><br><span class="menuText" id="hidedisplay">Hidden Mode</span><label class="switch"><input id="hideInput" type="checkbox" '+(window.game.free.hideBlanks?"checked":"")+'><div><span></span></div></label><span class="smallText">Hidden mode hides the letter blanks.</span><br><br><div class="hr"></div><span class="smallText">Game changes won\'t be adjusted until next card.</span><br></div>',window.setModal=$.dialog({title:'<span class="modalTitle">Options</span>',content:e,theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,backgroundDismiss:!0,useBootstrap:!1,onContentReady:function(){if(this.$content.find("#livesInput").on("input",(function(){this.value>0?(document.getElementById("livesdisplay").innerText=this.value,window.game.free.lives=parseInt(this.value)):0==this.value&&(document.getElementById("livesdisplay").innerText="Off",window.game.free.lives=-1),Cookies.set("befuddle",JSON.stringify(window.game),{expires:365})})),this.$content.find("#manaInput").on("input",(function(){window.game.free.manaState=parseInt(this.value),document.getElementById("manadisplay").innerText=["Show Nothing","Show Colors","Show Mana Cost"][parseInt(this.value)],Cookies.set("befuddle",JSON.stringify(window.game),{expires:365})})),this.$content.find("#hideInput").on("input",(function(){window.game.free.hideBlanks=this.checked,Cookies.set("befuddle",JSON.stringify(window.game),{expires:365})})),this.$content.find("#darkInput").on("input",(function(){window.game.theme=this.checked?"dark":"light",setTheme(),Cookies.set("befuddle",JSON.stringify(window.game),{expires:365})})),canVibrate){this.$content.find("#vibraInput").on("input",(function(){window.game.vibra=this.checked,Cookies.set("befuddle",JSON.stringify(window.game),{expires:365})}))}}})}}function statsModal(){let e="";"daily"==window.game.mode?e+='<div id="streakTitle">Streak</div><div><table id="streakTable"><tbody><tr><th>Current</th><th>Max</th></tr><tr><td>'+window.stats.daily.streak+"</td><td>"+window.stats.daily.maxStk+'</td></tr></tbody></table></div><canvas id="wrChart" class="chartCanvas" width="400px" height="300px"></canvas><canvas id="scoreChart" class="chartCanvas" width="400px" height="300px"></canvas><canvas id="accChart" class="chartCanvas" width="400px" height="300px"></canvas>':"free"==window.game.mode&&(e+='<div id="streakTitle">Perfect Games</div><div><table id="streakTable"><tbody><tr><th>Normal Mode</th><th>Hidden Mode</th></tr><tr><td>'+window.stats.free.perf[0]+"</td><td>"+window.stats.free.perf[1]+"</td></tr></tbody></table></div>"+(wrvl()?'<canvas id="wrChart" class="chartCanvas" width="400px" height="300px"></canvas>':"")+'<canvas id="scoreChart" class="chartCanvas" width="400px" height="300px"></canvas><canvas id="accChart" class="chartCanvas" width="400px" height="300px"></canvas>'),$.dialog({title:'<span class="modalTitle">Statistics</span>',content:e,theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,backgroundDismiss:!0,useBootstrap:!1,onContentReady:function(){"daily"==window.game.mode?dailyChartsSetup():"free"==window.game.mode&&freeChartsSetup()}})}function wrvl(){for(var e=0;e<25;e++)if(window.stats.free.wr[0][e][0]+window.stats.free.wr[0][e][1]+window.stats.free.wr[1][e][0]+window.stats.free.wr[1][e][1]!=0)return!0;return!1}function freeChartsSetup(){let e,a,t=[[],[]],n=[],i=[];for(var o=0;o<25;o++){for(var d=0;d<2;d++)e=window.stats.free.wr[d][o][0],a=window.stats.free.wr[d][o][1],e==a?t[d].push(.5):t[d].push(e/(e+a));n.push(o),i.push(o+1)}wrvl()&&lineChart(document.getElementById("wrChart"),{labels:i,datasets:[{label:"Normal",data:t[0],backgroundColor:"#346888",borderColor:"#346888"},{label:"Hidden",data:t[1],backgroundColor:"#9dc6e0",borderColor:"#9dc6e0"}]},"Win Rate vs Lives"),vertBarChart(document.getElementById("scoreChart").getContext("2d"),{labels:n,datasets:[{label:"Normal",data:window.stats.free.score[0],backgroundColor:"#346888",borderColor:"rgba(0, 0, 0, 0)",borderWidth:1,stack:"Stack 0"},{label:"Hidden",data:window.stats.free.score[1],backgroundColor:"#9dc6e0",borderColor:"rgba(0, 0, 0, 0)",borderWidth:1,stack:"Stack 0"}]},"Score Distribution"),mspie(document.getElementById("accChart").getContext("2d"),{labels:["Correct (Normal)","Incorrect (Normal)","Correct (Hidden)","Incorrect (Hidden)"],datasets:[{backgroundColor:["#346888","#a35347"],data:[window.stats.free.acc[0],window.stats.free.acc[1]],borderColor:"rgba(0, 0, 0, 0)",borderWidth:2},{backgroundColor:["#9dc6e0","#edbcb0"],data:[window.stats.free.acc[2],window.stats.free.acc[3]],borderColor:"rgba(0, 0, 0, 0)",borderWidth:2}]},"Letter Accuracy")}function dailyChartsSetup(){mspie(document.getElementById("wrChart").getContext("2d"),{labels:["Win (Normal)","Loss (Normal)","Win (Hidden)","Loss (Hidden)"],datasets:[{backgroundColor:["#346888","#a35347"],data:[window.stats.daily.WL[0],window.stats.daily.WL[1]],borderColor:"rgba(0, 0, 0, 0)",borderWidth:2},{backgroundColor:["#9dc6e0","#edbcb0"],data:[window.stats.daily.WL[2],window.stats.daily.WL[3]],borderColor:"rgba(0, 0, 0, 0)",borderWidth:2}]},"Daily Win/Loss"),vertBarChart(document.getElementById("scoreChart").getContext("2d"),{labels:[0,1,2,3,4,5,6],datasets:[{label:"Normal",data:window.stats.daily.score[0],backgroundColor:"#346888",borderColor:"rgba(0, 0, 0, 0)",borderWidth:1,stack:"Stack 0"},{label:"Hidden",data:window.stats.daily.score[1],backgroundColor:"#9dc6e0",borderColor:"rgba(0, 0, 0, 0)",borderWidth:1,stack:"Stack 0"}]},"Score Distribution"),mspie(document.getElementById("accChart").getContext("2d"),{labels:["Correct (Normal)","Incorrect (Normal)","Correct (Hidden)","Incorrect (Hidden)"],datasets:[{backgroundColor:["#346888","#a35347"],data:[window.stats.daily.acc[0],window.stats.daily.acc[1]],borderColor:"rgba(0, 0, 0, 0)",borderWidth:2},{backgroundColor:["#9dc6e0","#edbcb0"],data:[window.stats.daily.acc[2],window.stats.daily.acc[3]],borderColor:"rgba(0, 0, 0, 0)",borderWidth:2}]},"Letter Accuracy")}function menuModal(){let e=$.dialog({title:"",content:'<div class="modalTitle" style="text-align: center;font-size: 30px;">Befuddle</div><br><button id="returnButton" class="menuButton">Select Game Mode</button>'+(window.gameSesh.end?"":'<br><button id="guButton" class="menuButton">Show Answer</button>')+'<br><button id="clearButton" class="menuButton">Clear Data</button><br><br><div class="hr"></div><div class="modalText" id="credits">Credits <span id="creditExpand" class="material-symbols-outlined"> expand_more </span></div><div id="creditText"class="expandiv collapsediv">• Card Data: <a href="https://scryfall.com/" target="_blank">Scryfall</a><br>• Card Images: <a href="https://scryfall.com/" target="_blank">Scryfall</a><br>• Font: <a href="https://company.wizards.com/en" target="_blank">Wizards of the Coast</a><br><br></div><div class="hr"></div><div class="modalText" id="disclaimer">Disclaimer  <span id="disclaimerExpand" class="material-symbols-outlined"> expand_more </span></div><div id="disclaimerText" class="expandiv collapsediv">Portions of Befuddle are unofficial Fan Content permitted under the <a href="https://company.wizards.com/en/legal/fancontentpolicy" target="_blank">Wizards of the Coast Fan Content Policy</a>. The literal and graphical information presented on this site about Magic: The Gathering, including card images, the mana symbols, is copyright Wizards of the Coast, LLC, a subsidiary of Hasbro, Inc. Befuddle is not produced by, endorsed by, supported by, or affiliated with Wizards of the Coast.<br><br></div><div class="hr"></div><div class="helpText" style="text-align: center;">Developed with <span class="material-symbols-outlined" style="font-size: 11px;font-variation-settings: \'FILL\' 1;color: #64baf7;"> favorite </span> by Suitangi<br><a><span id="rab">Report a Bug</span></a><br><a><span id="bmad">Buy me a Drink</span></a></div>',theme:window.game.theme,animation:"left",closeAnimation:"left",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,backgroundDismiss:!0,useBootstrap:!1,onContentReady:function(){document.getElementById("credits").addEventListener("click",(function(){let e=document.getElementById("creditText");e.classList.contains("collapsediv")?(e.classList.remove("collapsediv"),document.getElementById("creditExpand").classList.add("rotato")):(e.classList.add("collapsediv"),document.getElementById("creditExpand").classList.remove("rotato"))})),document.getElementById("disclaimer").addEventListener("click",(function(){let e=document.getElementById("disclaimerText");e.classList.contains("collapsediv")?(e.classList.remove("collapsediv"),document.getElementById("disclaimerExpand").classList.add("rotato")):(e.classList.add("collapsediv"),document.getElementById("disclaimerExpand").classList.remove("rotato"))})),document.getElementById("clearButton").addEventListener("click",(function(){$.confirm({title:'<span class="modalTitle">Clear Data</span>',content:'<span class="helpText">This will clear all cookies, delete all statisticss and all unfinished Befuddles. Are you sure?</span>',theme:"dark red",animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(300px, 60%)",draggable:!1,backgroundDismiss:!1,useBootstrap:!1,buttons:{show:{text:"Clear Data",btnClass:"btn-red",action:function(){Cookies.remove("befuddle"),Cookies.remove("daily"),Cookies.remove("free"),Cookies.remove("dailyStats"),Cookies.remove("freeStats")}},cancel:{text:"Cancel",btnClass:"btn-default"}}})})),document.getElementById("returnButton").addEventListener("click",(function(){window.gameSesh.end=!0,e.close(),mainMenuDisplay()})),document.getElementById("rab").addEventListener("click",(function(){reportBug()})),document.getElementById("bmad").addEventListener("click",(function(){buyDrink()})),window.gameSesh.end||document.getElementById("guButton").addEventListener("click",(function(){$.confirm({title:'<span class="modalTitle">Show Answer</span>',content:'<span class="helpText">Are you sure you want to abandon this Befuddle?</span>',theme:"dark red",animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(300px, 60%)",draggable:!1,backgroundDismiss:!1,useBootstrap:!1,buttons:{show:{text:"Show Answer",btnClass:"btn-red",action:function(){window.gameSesh.end=!0,document.getElementById("seeCard").style="","daily"==window.game.mode?(window.gameSesh.giveUp=!0,gameLostDaily()):"free"==window.game.mode&&gameLostFree(),Cookies.set(window.game.mode,JSON.stringify(window.gameSesh),{expires:365}),e.close()}},cancel:{text:"Cancel",btnClass:"btn-default"}}})}))}})}function getBrowserInfo(){navigator.appVersion;let e,a,t,n=navigator.userAgent,i=navigator.appName,o=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10),s="Unknown OS";return-1!=(a=n.indexOf("Opera"))?(i="Opera",o=n.substring(a+6),-1!=(a=n.indexOf("Version"))&&(o=n.substring(a+8))):-1!=(a=n.indexOf("MSIE"))?(i="Microsoft Internet Explorer",o=n.substring(a+5)):-1!=(a=n.indexOf("Chrome"))?(i="Chrome",o=n.substring(a+7)):-1!=(a=n.indexOf("Safari"))?(i="Safari",o=n.substring(a+7),-1!=(a=n.indexOf("Version"))&&(o=n.substring(a+8))):-1!=(a=n.indexOf("Firefox"))?(i="Firefox",o=n.substring(a+8)):(e=n.lastIndexOf(" ")+1)<(a=n.lastIndexOf("/"))&&(i=n.substring(e,a),o=n.substring(a+1),i.toLowerCase()==i.toUpperCase()&&(i=navigator.appName)),-1!=(t=o.indexOf(";"))&&(o=o.substring(0,t)),-1!=(t=o.indexOf(" "))&&(o=o.substring(0,t)),d=parseInt(""+o,10),isNaN(d)&&(o=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10)),-1!=navigator.appVersion.indexOf("Win")&&(s="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(s="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(s="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(s="Linux"),{"Browser name":i,"Full version":o,"Major version":d,"navigator.appName":navigator.appName,"navigator.userAgent":navigator.userAgent,OS:s}}function reportBug(){let e="{";e+="browser_info: "+JSON.stringify(getBrowserInfo())+",",e+="current_game: "+JSON.stringify(window.gameSesh)+",",e+="game_settings: "+Cookies.get("befuddle")+",",e+="dailySaved: "+Cookies.get("daily")+",",e+="freeSaved: "+Cookies.get("free")+",",e+="}",e=encodeURI(e),$.dialog({title:"",content:'<br><iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfofhsXMv1iW188eXql2h5KwPr08dE4j93EwA3-hd9lNxr5OA/viewform?embedded=true?usp=pp_url&entry.1735799869='+e+'" width="100%" height="600px" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>',theme:"light",animation:"bottom",closeAnimation:"bottom",animateFromElement:!1,boxWidth:"min(400px, 95%)",draggable:!1,backgroundDismiss:!1,useBootstrap:!1,onContentReady:function(){}})}function buyDrink(){$.dialog({title:"",content:'<br><iframe id="kofiframe" src="https://ko-fi.com/suitangi/?hidefeed=true&amp;widget=true&amp;embed=true&amp;preview=true" style="border:none;padding:4px;" height="712" title="suitangi"></iframe>',theme:"light",animation:"bottom",closeAnimation:"bottom",animateFromElement:!1,boxWidth:"min(320px, 85%)",draggable:!1,backgroundDismiss:!0,useBootstrap:!1,onContentReady:function(){}})}function continueGameModal(){$.confirm({title:'<span class="modalTitle">Continue?</span>',content:'<span class="modalText">Previous game data found, would you like to continue?</span>',theme:window.game.theme,animation:"top",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,backgroundDismiss:!1,useBootstrap:!1,buttons:{free:{text:"New Game",btnClass:"btn-purple",action:function(){window.gameSesh.end=!0,Cookies.remove("free"),loadGame()}},daily:{text:"Continue",btnClass:"btn-blue",action:function(){loadGame()}}}})}function mainMenuDisplay(){mainMenuModal=$.confirm({title:'<span id="mainMenuTitle">Welcome to Befuddle</span>',content:'<span class="mainMenuText">Select your game mode</span>',theme:"supervan",animation:"opacity",closeAnimation:"top",animateFromElement:!1,boxWidth:"min(400px, 80%)",draggable:!1,backgroundDismiss:!1,backgroundDismissAnimation:"none",useBootstrap:!1,onContentReady:function(){this.buttons.daily.el.hover((function(){mainMenuModal.setContent('<span class="mainMenuText">Challenge the daily Befuddle</span>')}),(function(){mainMenuModal.setContent('<span class="mainMenuText">Select your game mode</span>')})),this.buttons.free.el.hover((function(){mainMenuModal.setContent('<span class="mainMenuText">Play endlessly on free mode</span>')}),(function(){mainMenuModal.setContent('<span class="mainMenuText">Select your game mode</span>')}))},buttons:{daily:{text:'<span class="mainMenuText">Daily Befuddle</span>',action:function(){window.game.mode="daily",Cookies.get("daily")&&(window.gameSesh=JSON.parse(Cookies.get("daily")),window.mtgCard=window.gameSesh.card,window.gameSesh.end&&(window.gameSesh.end=!1)),loadGame()}},free:{text:'<span class="mainMenuText">Free Play</span>',action:function(){window.game.mode="free",Cookies.get("free")&&(window.gameSesh=JSON.parse(Cookies.get("free")),window.mtgCard=window.gameSesh.card),window.gameSesh.end?loadGame():continueGameModal()}}}})}function loadGame(){if(null!=window.game.mode){if(!window.gameSesh.end)return console.log("Continued Game Session"),loadCard(),loadGuesses(),void("daily"==window.game.mode&&window.gameSesh.giveUp&&(window.gameSesh.end=!0,document.getElementById("seeCard").style="",gameLostDaily(),Cookies.set("daily",JSON.stringify(window.gameSesh),{expires:365})));if(window.firstTime&&helpModal(),"daily"==window.game.mode){function e(e){document.getElementById("cardImage").style="opacity:0; transition: opacity 0s;",document.getElementById("imageLoading").style="";let a=new Date;Cookies.set("befuddle",JSON.stringify(window.game),{expires:365}),loadCard(e[a.getDOY()])}null==window.dailyList?fetch("./dailyList.json").then((e=>e.json())).then((a=>{window.dailyList=a,e(a)})).catch((function(){console.error("Could not fetch daily card list")})):e(window.dailyList)}else if("free"==window.game.mode){function a(e){getParameterByName("cardId")?requestCard(getParameterByName("cardId")):requestCard(window.cardList[Math.floor(Math.random()*window.cardList.length)])}null==window.cardList?fetch("./cardList.json").then((e=>e.json())).then((e=>{window.cardList=e,a()})).catch((function(){console.error("Could not fetch card list")})):a(window.cardList)}}else mainManuDisplay()}function loadTimer(){let e=new Date,a=new Date;a.setHours(24,0,0,0);let t=(60*e.getMinutes()+e.getSeconds())%300,n=a-e;function i(){if(300==t){if(e=new Date,t=(60*e.getMinutes()+e.getSeconds())%300,e>a)return"daily"==window.game.mode?(null!==window.dailyModal&&window.dailyModal.isOpen()&&(window.dailyModal.close(),window.dailyModal=null),Cookies.remove("daily"),window.gameSesh.end=!0,loadGame()):Cookies.remove("daily"),void loadTimer();n=a-e,setTimeout((function(e){n-=e,i()}),1e3-e.getMilliseconds(),1e3-e.getMilliseconds())}else setTimeout((function(){n-=1e3,i()}),1e3);null!==window.dailyModal&&window.dailyModal.isOpen()&&(document.getElementById("dailyTimerDisplay").innerText="Next Daily Befuddle │ "+function(e){function a(e){return("0"+e).slice(-2)}var t=(e=(e-e%1e3)/1e3)%60,n=(e=(e-t)/60)%60;return a((e-n)/60)+":"+a(n)+":"+a(t)}(n)),t++}setTimeout((function(){i()}),1e3-e.getMilliseconds())}function mspie(e,a,t){return new Chart(e,{type:"pie",data:a,options:{responsive:!0,plugins:{legend:{position:"bottom",labels:{generateLabels:function(e){const a=Chart.overrides.pie.plugins.legend.labels.generateLabels.call(this,e);let t=e.data.datasets.map((function(e){return e.backgroundColor}));return t=t.flat(),a.forEach((a=>{a.datasetIndex=(a.index-a.index%2)/2,a.hidden=!e.isDatasetVisible(a.datasetIndex),a.fillStyle=t[a.index]})),a},color:"dark"==window.game.theme?"white":"black",font:{family:"Roboto Mono"}},onClick:function(e,a,t){t.chart.getDatasetMeta(a.datasetIndex).hidden=t.chart.isDatasetVisible(a.datasetIndex),t.chart.update()}},tooltip:{callbacks:{label:function(e){const a=2*e.datasetIndex+e.dataIndex;return e.chart.data.labels[a]+": "+e.formattedValue}},titleFont:{family:"Roboto Mono"},bodyFont:{family:"Roboto Mono"}},title:{display:!0,color:"dark"==window.game.theme?"white":"black",font:{family:"Beleren Bold",size:20},text:t}}}})}function vertBarChart(e,a,t){return new Chart(e,{type:"bar",data:a,options:{scales:{y:{beginAtZero:!0,ticks:{color:"dark"==window.game.theme?"white":"black",stepSize:1},grid:{borderColor:"dark"==window.game.theme?"white":"black",color:"#6D6D6D"},title:{font:{family:"Beleren Bold"}},stacked:!0},x:{ticks:{color:"dark"==window.game.theme?"white":"black"},grid:{borderColor:"dark"==window.game.theme?"white":"black",display:!1},title:{font:{family:"Beleren Bold"}},stacked:!0}},plugins:{legend:{position:"bottom",labels:{color:"dark"==window.game.theme?"white":"black",font:{family:"Roboto Mono"}}},title:{display:!0,color:"dark"==window.game.theme?"white":"black",font:{family:"Beleren Bold",size:20},text:t},tooltip:{titleFont:{family:"Roboto Mono"},bodyFont:{family:"Roboto Mono"}}}}})}function lineChart(e,a,t){return new Chart(e,{type:"line",data:a,options:{scales:{y:{min:0,max:1,ticks:{color:"dark"==window.game.theme?"white":"black",stepSize:1},grid:{borderColor:"dark"==window.game.theme?"white":"black",color:"#6D6D6D"},title:{font:{family:"Beleren Bold"}}},x:{ticks:{color:"dark"==window.game.theme?"white":"black"},grid:{borderColor:"dark"==window.game.theme?"white":"black",display:!1},title:{font:{family:"Beleren Bold"}}}},plugins:{legend:{position:"bottom",labels:{color:"dark"==window.game.theme?"white":"black",font:{family:"Roboto Mono"}}},title:{display:!0,color:"dark"==window.game.theme?"white":"black",font:{family:"Beleren Bold",size:20},text:t},tooltip:{titleFont:{family:"Roboto Mono"},bodyFont:{family:"Roboto Mono"}}}}})}function setTheme(){let e=window.game.theme;window.setModal&&(window.setModal.$body.prevObject.removeClass("jconfirm-dark"),window.setModal.setTheme(window.game.theme)),window.dailyModal&&(window.dailyModal.$body.prevObject.removeClass("jconfirm-dark"),window.dailyModal.setTheme(window.game.theme));document.querySelector(":root").setAttribute("color-scheme",`${e}`)}$(document).ready((function(){console.log("https://tinyurl.com/specialcardforbefuddle"),window.displayKeyboard={},window.loadingGuesses=!1,window.dailyModal=null,window.game={},window.game.theme="dark",window.game.vibra=!0,window.game.daily={},window.game.daily.lives=7,window.game.daily.hideBlanks=!1,window.game.free={},window.game.free={},window.game.free.lives=-1,window.game.free.manaState=2,window.game.free.hideBlanks=!1,window.gameSesh={},window.gameSesh.end=!0,window.stats={},window.stats.daily={},window.stats.daily.streak=0,window.stats.daily.maxStk=0,window.stats.daily.score=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],window.stats.daily.WL=[0,0,0,0],window.stats.daily.acc=[0,0,0,0],window.stats.daily.doy=0,window.stats.free={},window.stats.free.perf=[0,0],window.stats.free.acc=[0,0,0,0],window.stats.free.wr=[[],[]],window.stats.free.score=[[],[]];for(var e=0;e<25;e++)window.stats.free.wr[0].push([0,0]),window.stats.free.wr[1].push([0,0]),window.stats.free.score[0].push(0),window.stats.free.score[1].push(0);if(loadTimer(),null==Cookies.get("freeStats")&&Cookies.set("freeStats",JSON.stringify(window.stats.free),{expires:365}),null==Cookies.get("dailyStats")&&Cookies.set("dailyStats",JSON.stringify(window.stats.daily),{expires:365}),Cookies.get("daily")){let e=JSON.parse(Cookies.get("daily")),a=new Date;null!=e.doy&&1e3*a.getYear()+a.getDOY()==e.doy||Cookies.remove("daily")}null==Cookies.get("befuddle")?(Cookies.set("befuddle",JSON.stringify(window.game),{expires:365}),window.game.theme=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",window.firstTime=!0,setTheme()):(window.firstTime=!1,window.game=JSON.parse(Cookies.get("befuddle")),""==window.game.theme&&(window.game.theme="light"),Cookies.set("befuddle",JSON.stringify(window.game)),null==Cookies.get("freeStats")?Cookies.set("freeStats",JSON.stringify(window.stats.free),{expires:365}):window.stats.free=JSON.parse(Cookies.get("freeStats")),null==Cookies.get("dailyStats")?Cookies.set("dailyStats",JSON.stringify(window.stats.daily),{expires:365}):window.stats.daily=JSON.parse(Cookies.get("dailyStats")),setTheme()),document.getElementById("stats-button").addEventListener("click",(function(){statsModal()})),document.getElementById("menu-button").addEventListener("click",(function(){menuModal()})),document.getElementById("settings-button").addEventListener("click",(function(){settingsModal()})),document.getElementById("help-button").addEventListener("click",(function(){helpModal()})),document.getElementById("seeCard").addEventListener("click",(function(){seeCardHandler()}));let a=document.getElementById("keyboard").children;for(e=0;e<a.length;e++)window.displayKeyboard[a[e].innerText.toLowerCase()]=a[e],a[e].setAttribute("data-key",a[e].innerText),a[e].addEventListener("click",(function(){window.gameSesh.end||submitLetter(this.getAttribute("data-key").toLowerCase())}));document.onkeypress=function(e){e=e||window.event,!window.gameSesh.end&&e.keyCode>=97&&e.keyCode<=122&&submitLetter(String.fromCharCode(e.keyCode)),!window.gameSesh.end&&e.keyCode>=65&&e.keyCode<=90&&submitLetter(String.fromCharCode(e.keyCode).toLowerCase())},window.game.mode="",getParameterByName("cardId")?(window.game.mode="free",window.gameSesh.end=!0,loadGame()):mainMenuDisplay()})),Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=this.getMonth(),a=this.getDate(),t=[0,31,59,90,120,151,181,212,243,273,304,334][e]+a;return e>1&&this.isLeapYear()&&t++,t};
